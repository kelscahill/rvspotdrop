"use strict";var WPFormsBuilderGeolocation=window.WPFormsBuilderGeolocation||function(p){var o,l={init:function(){p(l.ready)},ready:function(){o=p("#wpforms-builder"),l.bindEvents(),l.loadDefaultState()},bindEvents:function(){o.on("click",".wpforms-field-option-row-enable_address_autocomplete.wpforms-geolocation-fill-settings input",l.autocompleteRequire).on("change",".wpforms-field-option-row-enable_address_autocomplete:not(.wpforms-geolocation-fill-settings) input",l.toggleAutocompleteOptions).on("change",".wpforms-field-option-row-enable_address_autocomplete:not(.wpforms-geolocation-fill-settings) input",l.toggleLimitLength).on("change",".wpforms-field-option-row-display_map input",l.toggleMapDisplay).on("change",".wpforms-field-option-row-map_position select",l.changeMapPosition)},loadDefaultState:function(){p(".wpforms-field-option-row-enable_address_autocomplete input,.wpforms-field-option-row-display_map input").each(function(){p(this).trigger("change")})},autocompleteRequire:function(){p(this).prop("checked")&&(l.fillPlacesAPI(),p(this).removeAttr("checked"))},toggleAutocompleteOptions:function(){var o,e,i,t;p(this).prop("disabled")||(e=(o=p(this)).prop("checked"),i=o.closest(".wpforms-field-option-group-inner").find(".wpforms-field-option-row-display_map"),t=function(){o.prop("disabled",!1)},o.prop("disabled",!0),e?i.slideDown("",t):(i.find("input").removeAttr("checked").trigger("change"),i.slideUp("",t)))},toggleMapDisplay:function(){if(!p(this).prop("disabled")){var o=p(this),e=o.prop("checked"),i=o.closest(".wpforms-field-option-group-inner").find(".wpforms-field-option-row-map_position"),t=i.find("select").val(),n=o.closest(".wpforms-field-option").data("field-id").toString(),r=function(){o.prop("disabled",!1)};if(o.prop("disabled",!0),e)return l.updateMapPosition(n,t),void i.slideDown("",r);l.hideMap(n),i.slideUp("",r)}},toggleLimitLength:function(){var o=p(this).prop("checked"),e=p(this).closest(".wpforms-field-option").data("field-id"),e=p("#wpforms-field-option-"+e+"-limit_enabled");e.length&&(o&&e.prop("checked")&&(e.prop("checked",!1).trigger("change"),p.alert({title:wpforms_builder.heads_up,content:wpforms_builder.disable_limit_length,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"]}}})),e.prop("disabled",o))},changeMapPosition:function(){var o=p(this).closest(".wpforms-field-option").data("field-id").toString();l.updateMapPosition(o,p(this).val())},hideMap:function(o){p("#wpforms-field-"+o+" .wpforms-geolocation-map").hide()},updateMapPosition:function(o,e){l.hideMap(o),"above"===e?l.getAboveMapForPreviewField(o).show():"below"===e&&l.getBelowMapForPreviewField(o).show()},getAboveMapForPreviewField:function(o){var e=p("#wpforms-field-"+o),o=e.find(".primary-input").length?e.find(".primary-input"):e.find(".wpforms-address-scheme").first(),e=o.prev(".wpforms-geolocation-map");return e.length||(e=o.before(wpforms_builder.map.toString()),e=o.prev(".wpforms-geolocation-map")),e},getBelowMapForPreviewField:function(o){var e=p("#wpforms-field-"+o),o=e.find(".primary-input").length?e.find(".primary-input"):e.find(".wpforms-address-scheme").last(),e=o.next(".wpforms-geolocation-map");return e.length||(e=o.after(wpforms_builder.map.toString()),e=o.next(".wpforms-geolocation-map")),e},fillPlacesAPI:function(){p.alert({title:wpforms_builder.heads_up,content:wpforms_builder.places_provider_required,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"]}}})}};return l}((document,window,jQuery));WPFormsBuilderGeolocation.init();